/* ===== Variables ===== */
:root {
    --pink-light: #c9b8ff;
    --pink: #9945FF;
    --pink-dark: #7B2FD4;
    --red: #14F195;
    --red-dark: #e0e0ff;
    --gold: #ffd700;
    --white: #ffffff;
    --tile-size: 60px;
    --gap: 5px;
    --card-bg: rgba(20, 20, 40, 0.55);
}

/* ===== Reset & Base ===== */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: 'Comfortaa', cursive;
    background: #0a0a1a;
    background-image:
        radial-gradient(ellipse at 15% 20%, rgba(153, 69, 255, 0.25) 0%, transparent 50%),
        radial-gradient(ellipse at 85% 30%, rgba(20, 241, 149, 0.15) 0%, transparent 50%),
        radial-gradient(ellipse at 50% 80%, rgba(153, 69, 255, 0.18) 0%, transparent 50%),
        radial-gradient(ellipse at 30% 60%, rgba(0, 150, 255, 0.1) 0%, transparent 40%);
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 20px;
    padding: max(20px, env(safe-area-inset-top)) max(20px, env(safe-area-inset-right)) max(20px, env(safe-area-inset-bottom)) max(20px, env(safe-area-inset-left));
    -webkit-tap-highlight-color: transparent;
    color: var(--red-dark);
}

/* ===== Screens ===== */
.screen {
    width: 100%;
    max-width: 600px;
}

.hidden {
    display: none !important;
}

.card {
    position: relative;
    z-index: 1;
    background: rgba(20, 20, 45, 0.6);
    backdrop-filter: blur(24px);
    -webkit-backdrop-filter: blur(24px);
    border-radius: 30px;
    padding: 30px;
    text-align: center;
    box-shadow: 0 8px 40px rgba(0, 0, 0, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.08);
    border: 1px solid rgba(153, 69, 255, 0.2);
    animation: fadeInUp 0.5s ease-out;
}

@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(20px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.screen:not(.hidden) {
    animation: fadeInUp 0.4s ease-out forwards;
}

.screen.hiding {
    animation: fadeOutDown 0.3s ease-in forwards !important;
}

@keyframes fadeOutDown {
    from {
        opacity: 1;
        transform: translateY(0);
    }

    to {
        opacity: 0;
        transform: translateY(20px);
    }
}


/* ===== Floating Hearts ===== */
.floating-hearts {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    pointer-events: none;
    overflow: hidden;
    z-index: 9999;
}

.floating-heart {
    position: absolute;
    top: 100%;
    font-size: 1.8rem;
    animation: floatUp 6s linear forwards;
}

@keyframes floatUp {
    0% {
        opacity: 0.8;
        transform: scale(0.6) translateX(0);
    }

    20% {
        opacity: 0.9;
        transform: scale(1.2) translateX(10px);
    }

    40% {
        opacity: 0.7;
        transform: scale(0.9) translateX(-10px);
    }

    60% {
        opacity: 0.6;
        transform: scale(1.1) translateX(5px);
    }

    80% {
        opacity: 0.3;
        transform: scale(0.8) translateX(-5px);
    }

    100% {
        top: -10%;
        opacity: 0;
        transform: scale(0.6) translateX(0);
    }
}

/* ===== Typography ===== */
h1 {
    font-size: 2rem;
    margin-bottom: 10px;
    text-shadow: 2px 2px 4px rgba(255, 105, 180, 0.3);
}

h2 {
    font-size: 1.5rem;
    margin-bottom: 15px;
    color: var(--pink-dark);
}

.subtitle {
    font-size: 1rem;
    color: var(--pink-dark);
    margin-bottom: 20px;
}

.hearts {
    font-size: 50px;
    margin-bottom: 10px;
    animation: pulse 1.5s infinite;
}

@keyframes pulse {

    0%,
    100% {
        transform: scale(1);
    }

    50% {
        transform: scale(1.1);
    }
}

/* ===== Buttons ===== */
.btn {
    background: linear-gradient(135deg, var(--pink-dark), var(--red));
    color: white;
    border: none;
    padding: 15px 35px;
    font-size: 1.1rem;
    font-family: 'Comfortaa', cursive;
    font-weight: 600;
    border-radius: 50px;
    cursor: pointer;
    box-shadow: 0 6px 20px rgba(233, 30, 99, 0.4);
    transition: transform 0.3s, box-shadow 0.3s;
    margin: 5px;
}

@media (hover: hover) {
    .btn:hover {
        transform: translateY(-3px);
        box-shadow: 0 10px 30px rgba(233, 30, 99, 0.5);
    }
}

.btn:active {
    transform: translateY(-1px);
}

.btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
    transform: none;
}

.btn-small {
    padding: 10px 25px;
    font-size: 0.95rem;
}

.btn-gold {
    background: linear-gradient(135deg, #FFD700, #FF8C00);
    color: #1a0524;
    -webkit-text-stroke: 0;
    text-shadow: none;
    font-weight: 800;
    box-shadow: 0 6px 20px rgba(255, 140, 0, 0.4);
}



/* ===== Map Screen ===== */
.map-title {
    margin-bottom: 10px;
}

/* ===== Candy Crush Map ===== */
.map-scroll {
    position: relative;
    width: 100%;
    height: 520px;
    border-radius: 24px;
    overflow-y: auto;
    overflow-x: hidden;
    margin-bottom: 10px;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3), inset 0 2px 4px rgba(255, 255, 255, 0.05);
    border: 2px solid rgba(153, 69, 255, 0.25);
    scrollbar-width: none;
    -ms-overflow-style: none;
}

.map-scroll::-webkit-scrollbar {
    display: none;
}

.map-path {
    position: relative;
    width: 100%;
    min-height: 900px;
    background: url('photos/map-bg.png') center top / cover no-repeat;
    padding: 40px 0;
}

.map-path::before {
    content: '';
    position: absolute;
    inset: 0;
    background:
        radial-gradient(circle at 10% 20%, rgba(255, 255, 255, 0.12) 0%, transparent 50%),
        radial-gradient(circle at 85% 45%, rgba(255, 255, 255, 0.08) 0%, transparent 40%),
        radial-gradient(circle at 30% 70%, rgba(255, 255, 255, 0.06) 0%, transparent 45%),
        radial-gradient(circle at 70% 90%, rgba(255, 255, 255, 0.1) 0%, transparent 35%);
    pointer-events: none;
    z-index: 0;
}

.map-path svg.path-svg {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 1;
    pointer-events: none;
}

/* ===== Level Node ===== */
.level-node {
    position: absolute;
    width: 72px;
    height: 72px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    z-index: 5;
    transform: translateX(-50%);
    transition: transform 0.2s ease;
    font-size: 2rem;
    border: 4px solid rgba(255, 255, 255, 0.8);
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.25), 0 0 0 3px rgba(0, 0, 0, 0.1);
    user-select: none;
    -webkit-user-select: none;
    /* Removed overflow: hidden so children like text can be visible outside the circle */
}

/* Inner wrapper for image backgrounds so they clip to the circle */
.level-node-bg {
    position: absolute;
    inset: 0;
    border-radius: 50%;
    overflow: hidden;
    z-index: 1;
    /* Stay behind the text labels */
    pointer-events: none;
}

@media (hover: hover) {
    .level-node:hover:not(.locked) {
        transform: translateX(-50%) scale(1.12);
    }
}

.level-node.completed {
    border-color: #FFD700;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2), 0 0 20px rgba(255, 215, 0, 0.4), 0 0 0 3px rgba(255, 215, 0, 0.3);
    animation: nodeCompletedGlow 3s ease-in-out infinite;
}

@keyframes nodeCompletedGlow {

    0%,
    100% {
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2), 0 0 15px rgba(255, 215, 0, 0.3), 0 0 0 3px rgba(255, 215, 0, 0.2);
    }

    50% {
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2), 0 0 25px rgba(255, 215, 0, 0.6), 0 0 0 5px rgba(255, 215, 0, 0.3);
    }
}

.level-node.locked {
    cursor: default;
    width: 56px;
    height: 56px;
    font-size: 1.5rem;
    background: rgba(150, 150, 150, 0.6) !important;
    border-color: rgba(200, 200, 200, 0.5);
    box-shadow: 0 3px 10px rgba(0, 0, 0, 0.2);
    filter: grayscale(0.7);
}

.level-node.current {
    border-color: #fff;
    animation: currentNodePulse 1.5s ease-in-out infinite;
}

.level-node.current::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 100%;
    height: 100%;
    border-radius: 50%;
    animation: currentNodeRing 2s ease-out infinite;
    pointer-events: none;
    z-index: -1;
}

@keyframes currentNodePulse {

    0%,
    100% {
        transform: translateX(-50%) scale(1);
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2), 0 0 20px rgba(255, 255, 255, 0.5);
    }

    50% {
        transform: translateX(-50%) scale(1.08);
        box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3), 0 0 35px rgba(255, 255, 255, 0.7), 0 0 60px rgba(255, 255, 255, 0.2);
    }
}

@keyframes currentNodeRing {
    0% {
        box-shadow: 0 0 0 0 rgba(255, 255, 255, 0.6);
    }

    70% {
        box-shadow: 0 0 0 20px rgba(255, 255, 255, 0);
    }

    100% {
        box-shadow: 0 0 0 0 rgba(255, 255, 255, 0);
    }
}

.level-node.unlock-anim {
    animation: nodeUnlock 1.2s cubic-bezier(0.34, 1.56, 0.64, 1) !important;
}

@keyframes nodeUnlock {
    0% {
        transform: translateX(-50%) scale(0);
        opacity: 0;
    }

    50% {
        transform: translateX(-50%) scale(1.4);
        box-shadow: 0 0 50px rgba(255, 215, 0, 0.8);
    }

    70% {
        transform: translateX(-50%) scale(0.9);
    }

    100% {
        transform: translateX(-50%) scale(1);
        opacity: 1;
    }
}

.level-node-icon {
    font-size: 2rem;
    line-height: 1;
    filter: drop-shadow(0 2px 3px rgba(0, 0, 0, 0.3));
    z-index: 2;
    /* Sit above the background */
    position: relative;
}

.level-node.locked .level-node-icon {
    display: none;
}

.level-node-lock {
    font-size: 1.4rem;
    opacity: 0.9;
}

.level-node-stars {
    position: absolute;
    bottom: -14px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 0.8rem;
    white-space: nowrap;
    z-index: 6;
    filter: drop-shadow(0 0 4px rgba(255, 215, 0, 0.8));
    background: rgba(0, 0, 0, 0.4);
    padding: 1px 6px;
    border-radius: 10px;
}

.level-node-name {
    position: absolute;
    top: -26px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 0.65rem;
    font-weight: 700;
    color: #fff;
    background: rgba(0, 0, 0, 0.55);
    padding: 2px 8px;
    border-radius: 8px;
    white-space: nowrap;
    z-index: 7;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.6);
    pointer-events: none;
}

.level-node-best {
    position: absolute;
    bottom: -28px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 0.55rem;
    color: #fff;
    font-weight: 700;
    background: rgba(0, 0, 0, 0.4);
    padding: 1px 6px;
    border-radius: 6px;
    white-space: nowrap;
}

.map-deco {
    position: absolute;
    font-size: 1.5rem;
    z-index: 2;
    pointer-events: none;
    opacity: 0.7;
    animation: decoFloat 4s ease-in-out infinite;
}

@keyframes decoFloat {

    0%,
    100% {
        transform: translateY(0) rotate(0deg);
    }

    50% {
        transform: translateY(-5px) rotate(5deg);
    }
}

.goal-text {
    text-align: center;
    width: 100%;
    margin: 0 auto 5px;
}

/* ===== Game Header ===== */
.header {
    display: flex;
    gap: 10px;
    justify-content: center;
    flex-wrap: wrap;
    margin-bottom: 10px;
}

.stat {
    background: rgba(20, 20, 45, 0.6);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    border-radius: 15px;
    padding: 8px 14px;
    text-align: center;
    border: 1px solid rgba(153, 69, 255, 0.3);
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
    min-width: 75px;
}

.stat-label {
    font-size: 0.65rem;
    color: rgba(255, 255, 255, 0.6);
    text-transform: uppercase;
    letter-spacing: 1px;
    margin-bottom: 2px;
}

.stat-value {
    font-size: 1.2rem;
    font-weight: 700;
    color: #fff;
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
}

.stat.timer .stat-value {
    color: #00e5ff;
    /* Cyan for time */
    text-shadow: 0 0 8px rgba(0, 229, 255, 0.4);
}

.stat.timer.warning .stat-value {
    color: #ff0000;
    animation: blink 0.5s infinite;
}

@keyframes blink {

    0%,
    100% {
        opacity: 1;
    }

    50% {
        opacity: 0.5;
    }
}

/* ===== Game Top Bar ===== */
.game-top-bar {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 8px;
}

.game-top-info {
    flex: 1;
    text-align: center;
}

.game-top-spacer {
    width: 45px;
    flex-shrink: 0;
}

.level-header {
    text-align: center;
    font-size: 1.2rem;
    font-weight: 700;
    color: #fff;
    text-shadow: 0 2px 5px rgba(0, 0, 0, 0.5), 0 0 10px rgba(153, 69, 255, 0.5);
}

.goal-text {
    background: rgba(20, 20, 45, 0.7);
    backdrop-filter: blur(8px);
    border: 1px solid rgba(255, 215, 0, 0.4);
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
    color: var(--gold);
    padding: 6px 18px;
    border-radius: 20px;
    font-size: 0.9rem;
    font-weight: 600;
    display: inline-block;
    margin-bottom: 8px;
}

/* ===== Progress Bar ===== */
.progress-bar {
    width: 100%;
    max-width: 530px;
    height: 12px;
    background: rgba(0, 0, 0, 0.5);
    box-shadow: inset 0 2px 5px rgba(0, 0, 0, 0.5), 0 1px 0 rgba(255, 255, 255, 0.1);
    border-radius: 6px;
    overflow: hidden;
    margin: 0 auto 12px auto;
    transition: box-shadow 0.5s ease;
}

.progress-fill {
    height: 100%;
    border-radius: 5px;
    transition: width 0.3s ease, background 0.5s ease;
    width: 0%;
}

/* Stage 1: ⭐ — pink to gold */
.progress-fill.progress-stage-1 {
    background: linear-gradient(90deg, var(--pink), var(--gold));
}

/* Stage 2: ⭐⭐ — emerald green */
.progress-fill.progress-stage-2 {
    background: linear-gradient(90deg, #2ecc71, #27ae60, #f1c40f);
}

/* Stage 3: ⭐⭐⭐ — blue to purple */
.progress-fill.progress-stage-3 {
    background: linear-gradient(90deg, #3498db, #9b59b6, #e91e63);
}

/* Stage 4: 🔥 — fiery */
.progress-fill.progress-stage-fire {
    background: linear-gradient(90deg, #ff4500, #ff8c00, #ffd700, #ff4500);
    background-size: 200% 100%;
    animation: fireGradientShift 1.5s linear infinite;
}

@keyframes fireGradientShift {
    0% {
        background-position: 0% 0;
    }

    100% {
        background-position: 200% 0;
    }
}

/* Fire glow on bar container */
.progress-bar.progress-fire {
    box-shadow: 0 0 10px rgba(255, 69, 0, 0.5), 0 0 20px rgba(255, 140, 0, 0.3);
    animation: progressFirePulse 1s ease-in-out infinite;
}

@keyframes progressFirePulse {

    0%,
    100% {
        box-shadow: 0 0 10px rgba(255, 69, 0, 0.5), 0 0 20px rgba(255, 140, 0, 0.3);
    }

    50% {
        box-shadow: 0 0 15px rgba(255, 69, 0, 0.7), 0 0 30px rgba(255, 140, 0, 0.5);
    }
}

/* Stage transition flash */
.progress-bar.progress-stage-transition {
    animation: progressFlash 0.6s ease-out;
}

@keyframes progressFlash {
    0% {
        box-shadow: 0 0 20px rgba(255, 215, 0, 0.8);
        transform: scaleY(1.8);
    }

    100% {
        box-shadow: none;
        transform: scaleY(1);
    }
}

/* ===== Board ===== */
.board-container {
    background: rgba(255, 255, 255, 0.25);
    backdrop-filter: blur(15px);
    -webkit-backdrop-filter: blur(15px);
    padding: 10px;
    border-radius: 20px;
    box-shadow: 0 8px 32px rgba(233, 30, 99, 0.3);
    border: 1px solid rgba(255, 255, 255, 0.4);
    display: flex;
    justify-content: center;
    align-items: center;
    margin: 0 auto;
    touch-action: none;
    position: relative;
}

.board {
    display: grid;
    grid-template-columns: repeat(8, var(--tile-size));
    grid-template-rows: repeat(8, var(--tile-size));
    gap: var(--gap);
    place-items: center;
    touch-action: none;
}

/* ===== Tiles ===== */
.tile {
    width: var(--tile-size);
    height: var(--tile-size);
    min-width: var(--tile-size);
    min-height: var(--tile-size);
    flex-shrink: 0;
    border-radius: 10px;
    cursor: pointer;
    background-color: var(--pink-light);
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    box-shadow: 0 3px 10px rgba(0, 0, 0, 0.15);
    border: 3px solid rgba(255, 255, 255, 0.6);
    transition: scale 0.25s cubic-bezier(0.175, 0.885, 0.32, 1.275), box-shadow 0.2s ease-out, opacity 0.2s ease-out;
    position: relative;
    overflow: hidden;
    will-change: transform, scale, opacity;
    user-select: none;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
}

.tile.hole {
    background: transparent;
    border: none;
    box-shadow: none;
    pointer-events: none;
    opacity: 0;
    cursor: default;
}

.tile::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.25) 0%, transparent 50%);
    pointer-events: none;
}

@media (hover: hover) {
    .tile:hover {
        scale: 1.05;
    }
}

.tile.selected {
    scale: 1.1;
    border-color: var(--gold);
    box-shadow: 0 0 15px var(--gold), 0 0 30px rgba(255, 215, 0, 0.4);
    animation: selectedPulse 0.8s ease-in-out infinite;
}

/* Ensure selection glow overrides special tile styles */
.tile.special-rocket-h.selected,
.tile.special-rocket-v.selected,
.tile.special-bomb.selected,
.tile.special-rainbow.selected,
.tile.special-lightning.selected {
    box-shadow: 0 0 15px var(--gold), 0 0 30px rgba(255, 215, 0, 0.5), 0 0 50px rgba(255, 215, 0, 0.3) !important;
    animation: selectedPulse 0.8s ease-in-out infinite !important;
    border-color: var(--gold) !important;
}

@keyframes selectedPulse {

    0%,
    100% {
        box-shadow: 0 0 15px var(--gold), 0 0 30px rgba(255, 215, 0, 0.4);
    }

    50% {
        box-shadow: 0 0 25px var(--gold), 0 0 50px rgba(255, 215, 0, 0.6);
    }
}

.tile.hint {
    border-color: var(--gold);
    animation: hintPulse 1s ease-in-out infinite;
}

@keyframes hintPulse {

    0%,
    100% {
        box-shadow: 0 0 12px rgba(255, 215, 0, 0.5);
        transform: scale(1);
    }

    50% {
        box-shadow: 0 0 22px rgba(255, 215, 0, 0.8);
        transform: scale(1.06);
    }
}

.tile.swapping {
    transition: transform 0.25s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    z-index: 10;
}

.tile.falling {
    animation: fall 0.35s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

@keyframes fall {
    0% {
        transform: translateY(-80px) scale(0.85);
    }

    100% {
        transform: translateY(0) scale(1);
    }
}

.tile.glowing {
    animation: tileGlow 0.4s ease-out;
}

@keyframes tileGlow {
    0% {
        box-shadow: 0 0 0 rgba(255, 215, 0, 0);
        filter: brightness(1);
    }

    40% {
        box-shadow: 0 0 40px rgba(255, 215, 0, 1), 0 0 80px rgba(255, 105, 180, 0.7), 0 0 120px rgba(255, 69, 0, 0.3);
        filter: brightness(1.5);
    }

    100% {
        box-shadow: 0 0 0 rgba(255, 215, 0, 0);
        filter: brightness(1);
    }
}

/* ===== Special Tiles (Standalone Elements) ===== */
.tile.special-rocket-h,
.tile.special-rocket-v,
.tile.special-bomb,
.tile.special-rainbow,
.tile.special-lightning {
    position: relative;
    overflow: visible;
    animation: specialPulse 2s ease-in-out infinite;
    z-index: 5;
    background-size: cover !important;
    border-width: 3px;
    border-style: solid;
    transition: box-shadow 0.4s ease, filter 0.3s ease, transform 0.3s ease;
}

@keyframes specialPulse {

    0%,
    100% {
        transform: scale(1);
        filter: brightness(1);
    }

    50% {
        transform: scale(1.05);
        filter: brightness(1.1);
    }
}

/* Shared icon styling */
.tile.special-rocket-h::after,
.tile.special-rocket-v::after,
.tile.special-bomb::after,
.tile.special-rainbow::after,
.tile.special-lightning::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 80%;
    height: 80%;
    z-index: 10;
    pointer-events: none;
    background-size: contain;
    background-repeat: no-repeat;
    background-position: center;
    filter: drop-shadow(0 0 6px rgba(255, 255, 255, 0.9)) drop-shadow(0 2px 4px rgba(0, 0, 0, 0.5));
}

/* ---- Rocket Horizontal ---- */
.tile.special-rocket-h {
    background: linear-gradient(90deg, #004d66, #00b8d4, #00e5ff, #80f0ff, #00e5ff, #00b8d4, #004d66) !important;
    border-color: #00e5ff;
    box-shadow: 0 0 15px rgba(0, 229, 255, 0.8), 0 0 30px rgba(0, 229, 255, 0.4), 0 0 50px rgba(0, 229, 255, 0.15);
}

.tile.special-rocket-h::after {
    background-image: url('photos/special/rocket-h.svg');
}

/* ---- Rocket Vertical ---- */
.tile.special-rocket-v {
    background: linear-gradient(180deg, #4a0028, #c2185b, #ff4081, #ff80ab, #ff4081, #c2185b, #4a0028) !important;
    border-color: #ff4081;
    box-shadow: 0 0 15px rgba(255, 64, 129, 0.8), 0 0 30px rgba(255, 64, 129, 0.4), 0 0 50px rgba(255, 64, 129, 0.15);
}

.tile.special-rocket-v::after {
    background-image: url('photos/special/rocket-v.svg');
}

/* ---- Bomb ---- */
.tile.special-bomb {
    background: radial-gradient(circle at center, #ffcc00, #ff8c00, #ff6600, #cc4400, #662200) !important;
    border-color: #ff8c00;
    box-shadow: 0 0 18px rgba(255, 140, 0, 0.9), 0 0 35px rgba(255, 100, 0, 0.5), 0 0 60px rgba(255, 69, 0, 0.2);
}

.tile.special-bomb::after {
    background-image: url('photos/special/bomb.svg');
}

/* ---- Rainbow ---- */
.tile.special-rainbow {
    background: conic-gradient(from 0deg, #ff0000, #ff8800, #ffff00, #00ff00, #0088ff, #8800ff, #ff0000) !important;
    border-color: transparent;
    animation: rainbowShimmer 3s linear infinite, specialPulse 2.5s ease-in-out infinite;
}

.tile.special-rainbow::after {
    background-image: url('photos/special/rainbow.svg');
    animation: rainbowSpin 4s ease-in-out infinite;
}

@keyframes rainbowShimmer {
    0% {
        box-shadow: 0 0 15px #ff0000, 0 0 25px rgba(255, 0, 0, 0.3);
    }

    17% {
        box-shadow: 0 0 15px #ff8800, 0 0 25px rgba(255, 136, 0, 0.3);
    }

    33% {
        box-shadow: 0 0 15px #ffff00, 0 0 25px rgba(255, 255, 0, 0.3);
    }

    50% {
        box-shadow: 0 0 15px #00ff00, 0 0 25px rgba(0, 255, 0, 0.3);
    }

    67% {
        box-shadow: 0 0 15px #0088ff, 0 0 25px rgba(0, 136, 255, 0.3);
    }

    83% {
        box-shadow: 0 0 15px #8800ff, 0 0 25px rgba(136, 0, 255, 0.3);
    }

    100% {
        box-shadow: 0 0 15px #ff0000, 0 0 25px rgba(255, 0, 0, 0.3);
    }
}

@keyframes rainbowSpin {
    0% {
        transform: translate(-50%, -50%) scale(1) rotate(0deg);
    }

    50% {
        transform: translate(-50%, -50%) scale(1.08) rotate(180deg);
    }

    100% {
        transform: translate(-50%, -50%) scale(1) rotate(360deg);
    }
}

/* ---- Lightning ---- */
.tile.special-lightning {
    background: linear-gradient(135deg, #1a0033, #4a00e0, #8e2de2, #fff200, #ffcc00, #8e2de2, #4a00e0, #1a0033) !important;
    background-size: 200% 200% !important;
    border-color: #ffcc00;
    box-shadow: 0 0 15px rgba(255, 204, 0, 0.8), 0 0 30px rgba(142, 45, 226, 0.5), 0 0 50px rgba(255, 204, 0, 0.2);
    animation: specialPulse 2s ease-in-out infinite, lightningShimmer 1.5s linear infinite;
}

.tile.special-lightning::after {
    background-image: url('photos/special/lightning.svg');
    animation: electricPulse 0.8s ease-in-out infinite;
}

@keyframes lightningShimmer {
    0% {
        background-position: 0% 50%;
    }

    50% {
        background-position: 100% 50%;
    }

    100% {
        background-position: 0% 50%;
    }
}

@keyframes electricPulse {

    0%,
    100% {
        transform: translate(-50%, -50%) scale(1);
        filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.4)) drop-shadow(0 0 10px rgba(255, 255, 255, 0.5));
    }

    25% {
        transform: translate(-50%, -50%) scale(1.08);
        filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.4)) drop-shadow(0 0 15px rgba(255, 204, 0, 0.9));
    }

    50% {
        transform: translate(-50%, -50%) scale(1);
        filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.4)) drop-shadow(0 0 8px rgba(255, 255, 255, 0.3));
    }

    75% {
        transform: translate(-50%, -50%) scale(1.05);
        filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.4)) drop-shadow(0 0 18px rgba(142, 45, 226, 0.8));
    }
}

/* Lightning bolt SVG container */
.lightning-bolt-svg {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 9999;
    animation: boltFlicker 0.5s ease-out forwards;
    will-change: opacity;
}

.lightning-bolt-svg line {
    stroke-linecap: round;
}

@keyframes boltFlicker {
    0% {
        opacity: 1;
    }

    15% {
        opacity: 0.4;
    }

    30% {
        opacity: 1;
    }

    50% {
        opacity: 0.6;
    }

    70% {
        opacity: 0.9;
    }

    85% {
        opacity: 0.3;
    }

    100% {
        opacity: 0;
    }
}

/* Impact glow on struck tiles */
.lightning-impact {
    position: absolute;
    top: 50%;
    left: 50%;
    width: 160%;
    height: 160%;
    transform: translate(-50%, -50%);
    border-radius: 50%;
    background: radial-gradient(circle, rgba(255, 255, 200, 0.9) 0%, rgba(255, 204, 0, 0.6) 30%, rgba(142, 45, 226, 0.3) 60%, transparent 80%);
    pointer-events: none;
    z-index: 100;
    animation: impactGlow 0.6s ease-out forwards;
    will-change: opacity, transform;
}

@keyframes impactGlow {
    0% {
        transform: translate(-50%, -50%) scale(0.3);
        opacity: 1;
    }

    40% {
        transform: translate(-50%, -50%) scale(1.2);
        opacity: 0.8;
    }

    100% {
        transform: translate(-50%, -50%) scale(1.5);
        opacity: 0;
    }
}

/* White flash on struck tile */
.tile.lightning-struck {
    animation: tileZap 0.4s ease-out !important;
    z-index: 50;
}

@keyframes tileZap {
    0% {
        filter: brightness(1);
        transform: scale(1);
    }

    20% {
        filter: brightness(3) saturate(0);
        transform: scale(1.15);
    }

    50% {
        filter: brightness(2) saturate(0.5);
        transform: scale(1.05);
    }

    100% {
        filter: brightness(1);
        transform: scale(1);
    }
}

/* Screen flash — brighter */
.lightning-flash {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(255, 255, 220, 0.5);
    pointer-events: none;
    z-index: 9998;
    animation: lightFlash 0.35s ease-out forwards;
    will-change: opacity;
}

@keyframes lightFlash {
    0% {
        opacity: 1;
    }

    20% {
        opacity: 0.3;
    }

    40% {
        opacity: 0.7;
    }

    100% {
        opacity: 0;
    }
}

.tile.activating {
    z-index: 50;
    animation: activateFlash 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards !important;
}

@keyframes activateFlash {
    0% {
        transform: scale(1);
        filter: brightness(1);
        opacity: 1;
    }

    30% {
        transform: scale(1.6);
        filter: brightness(2.5);
        box-shadow: 0 0 40px rgba(255, 255, 255, 0.8);
        opacity: 1;
    }

    60% {
        transform: scale(1.2);
        filter: brightness(1.5);
        opacity: 0.8;
    }

    100% {
        transform: scale(0.3);
        filter: brightness(0.5);
        opacity: 0;
    }
}

/* Rocket activation — bright laser line */
.tile.special-rocket-h.activating {
    box-shadow: 0 0 40px #00e5ff, 0 0 80px #00e5ff, 0 0 120px rgba(0, 229, 255, 0.9),
        -300px 0 100px 8px rgba(0, 229, 255, 0.7), 300px 0 100px 8px rgba(0, 229, 255, 0.7) !important;
}

.tile.special-rocket-v.activating {
    box-shadow: 0 0 40px #ff4081, 0 0 80px #ff4081, 0 0 120px rgba(255, 64, 129, 0.9),
        0 -300px 100px 8px rgba(255, 64, 129, 0.7), 0 300px 100px 8px rgba(255, 64, 129, 0.7) !important;
}

/* Bomb activation — massive explosion glow */
.tile.special-bomb.activating {
    box-shadow: 0 0 50px #ff8c00, 0 0 100px #ff6600, 0 0 160px rgba(255, 100, 0, 0.8),
        0 0 250px rgba(255, 69, 0, 0.5) !important;
}

/* Rainbow activation — prismatic burst */
.tile.special-rainbow.activating {
    box-shadow: 0 0 50px #ff0000, 0 0 70px #ff8800, 0 0 100px #ffff00,
        0 0 130px #00ff00, 0 0 160px #0088ff, 0 0 200px #8800ff !important;
}

/* Matched tile glow enhancement */
.tile.matched {
    animation: matchedPop 0.45s ease-out forwards;
}

@keyframes matchedPop {
    0% {
        transform: scale(1);
        filter: brightness(1);
    }

    35% {
        transform: scale(1.25);
        filter: brightness(1.6);
    }

    100% {
        transform: scale(0);
        filter: brightness(2);
        opacity: 0;
    }
}

.tile.glowing {
    box-shadow: 0 0 25px rgba(255, 215, 0, 0.9), 0 0 50px rgba(255, 105, 180, 0.6), 0 0 80px rgba(255, 69, 0, 0.2);
}

/* Screen shake for big combos */
@keyframes boardShake {

    0%,
    100% {
        transform: translate(0, 0);
    }

    10% {
        transform: translate(-4px, -2px);
    }

    20% {
        transform: translate(4px, 2px);
    }

    30% {
        transform: translate(-3px, 3px);
    }

    40% {
        transform: translate(3px, -3px);
    }

    50% {
        transform: translate(-2px, 2px);
    }

    60% {
        transform: translate(2px, -2px);
    }

    70% {
        transform: translate(-1px, 1px);
    }

    80% {
        transform: translate(1px, -1px);
    }
}

.board-shake {
    animation: boardShake 0.4s ease-out;
}

.board-shake-strong {
    animation: boardShakeStrong 0.5s ease-out;
}

@keyframes boardShakeStrong {

    0%,
    100% {
        transform: translate(0, 0) rotate(0);
    }

    10% {
        transform: translate(-6px, -4px) rotate(-0.5deg);
    }

    20% {
        transform: translate(6px, 4px) rotate(0.5deg);
    }

    30% {
        transform: translate(-5px, 5px) rotate(-0.3deg);
    }

    40% {
        transform: translate(5px, -5px) rotate(0.3deg);
    }

    50% {
        transform: translate(-4px, 3px);
    }

    60% {
        transform: translate(3px, -3px);
    }

    70% {
        transform: translate(-2px, 2px);
    }

    80% {
        transform: translate(2px, -1px);
    }
}

/* ===== Combo Fire Border ===== */
.board-container.combo-fire {
    border-color: rgba(255, 140, 0, 0.8);
    box-shadow:
        0 0 15px rgba(255, 100, 0, 0.5),
        0 0 30px rgba(255, 69, 0, 0.3),
        inset 0 0 15px rgba(255, 140, 0, 0.15);
    animation: comboFirePulse 0.8s ease-in-out infinite;
}

.board-container.combo-fire-intense {
    border-color: rgba(255, 50, 0, 0.9);
    box-shadow:
        0 0 20px rgba(255, 50, 0, 0.6),
        0 0 40px rgba(255, 30, 0, 0.4),
        0 0 60px rgba(255, 69, 0, 0.2),
        inset 0 0 20px rgba(255, 100, 0, 0.2);
    animation: comboFireIntense 0.5s ease-in-out infinite;
}

.board-container.combo-fire-max {
    border-color: rgba(255, 255, 0, 0.9);
    box-shadow:
        0 0 25px rgba(255, 200, 0, 0.7),
        0 0 50px rgba(255, 100, 0, 0.5),
        0 0 80px rgba(255, 50, 0, 0.3),
        0 0 120px rgba(255, 0, 0, 0.15),
        inset 0 0 25px rgba(255, 200, 0, 0.25);
    animation: comboFireMax 0.35s ease-in-out infinite;
}

@keyframes comboFirePulse {

    0%,
    100% {
        box-shadow:
            0 0 15px rgba(255, 100, 0, 0.5),
            0 0 30px rgba(255, 69, 0, 0.3),
            inset 0 0 15px rgba(255, 140, 0, 0.15);
    }

    50% {
        box-shadow:
            0 0 25px rgba(255, 120, 0, 0.7),
            0 0 45px rgba(255, 69, 0, 0.4),
            inset 0 0 20px rgba(255, 140, 0, 0.25);
    }
}

@keyframes comboFireIntense {

    0%,
    100% {
        box-shadow:
            0 0 20px rgba(255, 50, 0, 0.6),
            0 0 40px rgba(255, 30, 0, 0.4),
            0 0 60px rgba(255, 69, 0, 0.2),
            inset 0 0 20px rgba(255, 100, 0, 0.2);
    }

    50% {
        box-shadow:
            0 0 30px rgba(255, 70, 0, 0.8),
            0 0 55px rgba(255, 30, 0, 0.5),
            0 0 80px rgba(255, 69, 0, 0.3),
            inset 0 0 25px rgba(255, 100, 0, 0.3);
    }
}

@keyframes comboFireMax {

    0%,
    100% {
        box-shadow:
            0 0 25px rgba(255, 200, 0, 0.7),
            0 0 50px rgba(255, 100, 0, 0.5),
            0 0 80px rgba(255, 50, 0, 0.3),
            0 0 120px rgba(255, 0, 0, 0.15),
            inset 0 0 25px rgba(255, 200, 0, 0.25);
        filter: brightness(1);
    }

    50% {
        box-shadow:
            0 0 35px rgba(255, 220, 0, 0.9),
            0 0 65px rgba(255, 120, 0, 0.6),
            0 0 100px rgba(255, 50, 0, 0.4),
            0 0 150px rgba(255, 0, 0, 0.2),
            inset 0 0 30px rgba(255, 200, 0, 0.35);
        filter: brightness(1.05);
    }
}

/* ===== Rocket Trail Effect ===== */
.rocket-trail {
    position: absolute;
    z-index: 60;
    pointer-events: none;
    border-radius: 4px;
}

.rocket-trail-h {
    height: 10px;
    top: 50%;
    transform: translateY(-50%);
    background: linear-gradient(90deg, transparent, #00e5ff, #ffffff, #00ffff, #00e5ff, transparent);
    box-shadow: 0 0 18px #00e5ff, 0 0 40px rgba(0, 229, 255, 0.6), 0 0 60px rgba(0, 229, 255, 0.3);
    animation: rocketTrailH 0.45s ease-out forwards;
}

@keyframes rocketTrailH {
    0% {
        left: 50%;
        right: 50%;
        opacity: 1;
    }

    50% {
        left: 0;
        right: 0;
        opacity: 1;
    }

    100% {
        left: 0;
        right: 0;
        opacity: 0;
    }
}

.rocket-trail-v {
    width: 10px;
    left: 50%;
    transform: translateX(-50%);
    background: linear-gradient(180deg, transparent, #ff4081, #ffffff, #ff80ab, #ff4081, transparent);
    box-shadow: 0 0 18px #ff4081, 0 0 40px rgba(255, 64, 129, 0.6), 0 0 60px rgba(255, 64, 129, 0.3);
    animation: rocketTrailV 0.45s ease-out forwards;
}

@keyframes rocketTrailV {
    0% {
        top: 50%;
        bottom: 50%;
        opacity: 1;
    }

    50% {
        top: 0;
        bottom: 0;
        opacity: 1;
    }

    100% {
        top: 0;
        bottom: 0;
        opacity: 0;
    }
}

/* ===== Bomb Shockwave Effect ===== */
.bomb-shockwave {
    position: absolute;
    width: 30px;
    height: 30px;
    border-radius: 50%;
    border: 3px solid rgba(255, 140, 0, 0.8);
    pointer-events: none;
    z-index: 60;
    will-change: transform, opacity;
    animation: shockwaveExpand 0.5s ease-out forwards;
}

@keyframes shockwaveExpand {
    0% {
        transform: translate(-50%, -50%) scale(1);
        opacity: 1;
        border-width: 5px;
    }

    100% {
        transform: translate(-50%, -50%) scale(9);
        opacity: 0;
        border-width: 1px;
    }
}

/* ===== Bomb Flash Overlay ===== */
.bomb-flash {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(255, 140, 0, 0.3);
    pointer-events: none;
    z-index: 55;
    will-change: opacity;
    animation: bombFlashAnim 0.35s ease-out forwards;
}

@keyframes bombFlashAnim {
    0% {
        opacity: 1;
    }

    100% {
        opacity: 0;
    }
}

/* ===== Rainbow Wave Effect ===== */
.rainbow-wave {
    position: absolute;
    width: 30px;
    height: 30px;
    border-radius: 50%;
    pointer-events: none;
    z-index: 60;
    will-change: transform, opacity;
    animation: rainbowWaveExpand 0.6s ease-out forwards;
    border: 3px solid rgba(255, 100, 200, 0.8);
}

@keyframes rainbowWaveExpand {
    0% {
        transform: translate(-50%, -50%) scale(1);
        opacity: 1;
    }

    100% {
        transform: translate(-50%, -50%) scale(10);
        opacity: 0;
    }
}

/* ===== CINEMATIC EFFECTS ===== */

/* God Rays — rotating light beams from center */
.god-rays {
    position: absolute;
    top: 50%;
    left: 50%;
    width: 350px;
    height: 350px;
    transform: translate(-50%, -50%);
    pointer-events: none;
    z-index: 55;
    opacity: 0;
    background: conic-gradient(from 0deg,
            transparent 0deg, rgba(255, 215, 0, 0.2) 15deg, transparent 30deg,
            transparent 60deg, rgba(255, 105, 180, 0.15) 75deg, transparent 90deg,
            transparent 120deg, rgba(255, 215, 0, 0.2) 135deg, transparent 150deg,
            transparent 180deg, rgba(255, 105, 180, 0.15) 195deg, transparent 210deg,
            transparent 240deg, rgba(255, 215, 0, 0.2) 255deg, transparent 270deg,
            transparent 300deg, rgba(255, 105, 180, 0.15) 315deg, transparent 330deg,
            transparent 360deg);
    border-radius: 50%;
    will-change: transform, opacity;
    animation: godRaysIn 0.4s ease-out forwards, godRaysSpin 4s linear infinite;
}

@keyframes godRaysIn {
    0% {
        opacity: 0;
        transform: translate(-50%, -50%) scale(0.3);
    }

    100% {
        opacity: 0.8;
        transform: translate(-50%, -50%) scale(1);
    }
}

@keyframes godRaysSpin {
    0% {
        rotate: 0deg;
    }

    100% {
        rotate: 360deg;
    }
}

.god-rays.fade-out {
    animation: godRaysFade 0.5s ease-in forwards;
}

@keyframes godRaysFade {
    0% {
        opacity: 0.8;
    }

    100% {
        opacity: 0;
        transform: translate(-50%, -50%) scale(1.2);
    }
}

/* Light Burst — expanding radial glow */
.light-burst {
    position: fixed;
    width: 30px;
    height: 30px;
    pointer-events: none;
    z-index: 56;
    border-radius: 50%;
    background: radial-gradient(circle, rgba(255, 255, 255, 0.7), rgba(255, 215, 0, 0.3) 40%, transparent 70%);
    will-change: transform, opacity;
    animation: lightBurstExpand 0.6s ease-out forwards;
}

@keyframes lightBurstExpand {
    0% {
        transform: scale(1);
        opacity: 1;
    }

    100% {
        transform: scale(12);
        opacity: 0;
    }
}

/* Light burst ring */
.light-burst-ring {
    position: fixed;
    width: 10px;
    height: 10px;
    pointer-events: none;
    z-index: 55;
    border-radius: 50%;
    border: 3px solid rgba(255, 255, 255, 0.7);
    will-change: transform, opacity;
    animation: lightBurstRing 0.5s ease-out forwards;
}

@keyframes lightBurstRing {
    0% {
        transform: scale(1);
        opacity: 1;
    }

    100% {
        transform: scale(25);
        opacity: 0;
    }
}

/* Cinematic Vignette — darkened screen edges */
.cinematic-vignette {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    pointer-events: none;
    z-index: 53;
    background: radial-gradient(ellipse at center, transparent 40%, rgba(0, 0, 0, 0.4) 100%);
    will-change: opacity;
    animation: vignetteIn 0.3s ease-out forwards;
}

@keyframes vignetteIn {
    0% {
        opacity: 0;
    }

    100% {
        opacity: 1;
    }
}

.cinematic-vignette.fade-out {
    animation: vignetteFade 0.5s ease-in forwards;
}

@keyframes vignetteFade {
    0% {
        opacity: 1;
    }

    100% {
        opacity: 0;
    }
}

/* Screen Color Tint Overlay */
.screen-tint {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    pointer-events: none;
    z-index: 54;
    will-change: opacity;
    animation: screenTintPulse 0.6s ease-in-out forwards;
}

.screen-tint.rainbow {
    background: linear-gradient(45deg,
            rgba(255, 0, 0, 0.08), rgba(255, 136, 0, 0.08),
            rgba(255, 255, 0, 0.08), rgba(0, 255, 0, 0.08),
            rgba(0, 136, 255, 0.08), rgba(136, 0, 255, 0.08));
    background-size: 400% 400%;
    animation: screenTintPulse 0.8s ease-in-out forwards,
        rainbowTintShift 1s linear infinite;
}

.screen-tint.golden {
    background: radial-gradient(circle at center, rgba(255, 215, 0, 0.15), transparent 70%);
}

.screen-tint.pink {
    background: radial-gradient(circle at center, rgba(255, 105, 180, 0.12), transparent 70%);
}

@keyframes screenTintPulse {
    0% {
        opacity: 0;
    }

    30% {
        opacity: 1;
    }

    100% {
        opacity: 0;
    }
}

@keyframes rainbowTintShift {
    0% {
        background-position: 0% 50%;
    }

    100% {
        background-position: 400% 50%;
    }
}

/* Slow-mo Board Zoom */
.board-cinematic-zoom {
    transition: transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
    transform: scale(1.06);
}

/* Swipe sparkle trail */
.swipe-sparkle {
    position: fixed;
    width: 6px;
    height: 6px;
    border-radius: 50%;
    pointer-events: none;
    z-index: 150;
    background: radial-gradient(circle, rgba(255, 215, 0, 0.9), rgba(255, 105, 180, 0.4));
    box-shadow: 0 0 6px rgba(255, 215, 0, 0.6);
    animation: sparkleTrail 0.5s ease-out forwards;
}

@keyframes sparkleTrail {
    0% {
        opacity: 1;
        transform: scale(1);
    }

    100% {
        opacity: 0;
        transform: scale(0.2) translateY(-15px);
    }
}

/* ===== Effects ===== */
.combo {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-weight: 700;
    padding: 12px 30px;
    border-radius: 20px;
    z-index: 100;
    pointer-events: none;
    animation: comboIn 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
}

/* Combo level styles */
.combo-level-1 {
    background: linear-gradient(135deg, var(--gold), #ffec8b);
    color: var(--red-dark);
    font-size: 1.6rem;
    box-shadow: 0 10px 40px rgba(255, 215, 0, 0.6);
    -webkit-text-stroke: 0.5px rgba(0, 0, 0, 0.3);
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.35), 0 0 4px rgba(0, 0, 0, 0.15);
}

.combo-level-2 {
    background: linear-gradient(135deg, #ff8c00, #ff6600);
    color: white;
    font-size: 1.9rem;
    box-shadow: 0 10px 40px rgba(255, 100, 0, 0.7);
    text-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
}

.combo-level-3 {
    background: linear-gradient(135deg, #ff3300, #ff0000, #ff3300);
    color: white;
    font-size: 2.2rem;
    box-shadow: 0 10px 50px rgba(255, 0, 0, 0.7), 0 0 30px rgba(255, 100, 0, 0.5);
    text-shadow: 0 2px 10px rgba(0, 0, 0, 0.4);
    animation: comboIn 0.6s cubic-bezier(0.34, 1.56, 0.64, 1), comboMaxGlow 0.4s ease-in-out infinite;
}

@keyframes comboMaxGlow {

    0%,
    100% {
        filter: brightness(1);
    }

    50% {
        filter: brightness(1.3);
    }
}

@keyframes comboIn {
    0% {
        transform: translate(-50%, -50%) scale(0) rotate(-10deg);
        opacity: 0;
    }

    60% {
        transform: translate(-50%, -50%) scale(1.3) rotate(2deg);
        opacity: 1;
    }

    100% {
        transform: translate(-50%, -50%) scale(1) rotate(0deg);
    }
}

.compliment {
    position: fixed;
    top: 30%;
    left: 50%;
    transform: translateX(-50%);
    background: linear-gradient(135deg, var(--pink-dark), var(--red));
    color: white;
    font-size: 1.2rem;
    font-weight: 600;
    padding: 10px 25px;
    border-radius: 25px;
    box-shadow: 0 8px 30px rgba(233, 30, 99, 0.5);
    z-index: 100;
    animation: complimentFloat 2s ease-out forwards;
    white-space: nowrap;
}

@keyframes complimentFloat {
    0% {
        opacity: 0;
        transform: translateX(-50%) translateY(20px);
    }

    20% {
        opacity: 1;
        transform: translateX(-50%) translateY(0);
    }

    80% {
        opacity: 1;
    }

    100% {
        opacity: 0;
        transform: translateX(-50%) translateY(-30px);
    }
}

.shuffle-notice {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: linear-gradient(135deg, var(--pink-dark), var(--red));
    color: white;
    font-size: 1.2rem;
    font-weight: 600;
    padding: 12px 28px;
    border-radius: 20px;
    box-shadow: 0 10px 40px rgba(233, 30, 99, 0.5);
    z-index: 100;
    animation: comboIn 0.4s ease-out;
}

/* ===== Match Particles ===== */
.match-particle {
    position: fixed;
    font-size: 1.5rem;
    z-index: 150;
    pointer-events: none;
    animation: particleFly 0.9s ease-out forwards;
}

@keyframes particleFly {
    0% {
        opacity: 1;
        transform: translate(0, 0) scale(1.3) rotate(0deg);
    }

    100% {
        opacity: 0;
        transform: translate(var(--tx), var(--ty)) scale(0.2) rotate(var(--rot));
    }
}

/* ===== Score Popup ===== */
.score-popup {
    position: fixed;
    font-size: 1.6rem;
    font-weight: 700;
    color: #ffd700;
    text-shadow: 0 2px 8px rgba(0, 0, 0, 0.4), 0 0 25px rgba(255, 215, 0, 0.7), 0 0 50px rgba(255, 105, 180, 0.3);
    z-index: 120;
    pointer-events: none;
    animation: scoreFloat 1.2s ease-out forwards;
}

@keyframes scoreFloat {
    0% {
        opacity: 1;
        transform: translateY(0) scale(0.5);
    }

    20% {
        transform: translateY(-10px) scale(1.2);
    }

    100% {
        opacity: 0;
        transform: translateY(-60px) scale(1);
    }
}

/* ===== Confetti ===== */
.confetti {
    position: fixed;
    width: 10px;
    height: 10px;
    top: -20px;
    z-index: 200;
    animation: confettiFall 3s linear forwards;
}

@keyframes confettiFall {
    0% {
        transform: translateY(0) rotate(0);
        opacity: 1;
    }

    100% {
        transform: translateY(100vh) rotate(720deg);
        opacity: 0;
    }
}

/* ===== Result Screens ===== */
.result {
    margin: 15px 0;
}

.result-score {
    font-size: 2.5rem;
    font-weight: 700;
    color: var(--red-dark);
}

.result-msg {
    font-size: 1.1rem;
    margin: 10px 0;
}



/* ===== Win Screen Stars ===== */
.win-stars-container {
    display: flex;
    justify-content: center;
    gap: 8px;
    margin: 10px 0;
}

.win-star {
    font-size: 2.2rem;
    opacity: 0;
    transform: scale(0) rotate(-180deg);
    animation: starReveal 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
}

.win-star.empty {
    filter: grayscale(1) opacity(0.3);
}

.win-star.earned {
    filter: drop-shadow(0 0 6px rgba(255, 215, 0, 0.8));
}

@keyframes starReveal {
    0% {
        opacity: 0;
        transform: scale(0) rotate(-180deg);
    }

    100% {
        opacity: 1;
        transform: scale(1) rotate(0deg);
    }
}

.star-thresholds {
    display: flex;
    justify-content: center;
    gap: 12px;
    font-size: 0.75rem;
    color: rgba(255, 255, 255, 0.85);
    margin: 5px 0 10px;
}

.star-thresholds span {
    background: rgba(0, 0, 0, 0.2);
    padding: 3px 10px;
    border-radius: 12px;
}

/* ===== Music & Back Buttons ===== */
.music-btn {
    width: 50px;
    height: 50px;
    border-radius: 50%;
    background: linear-gradient(135deg, var(--pink-dark), var(--red));
    border: none;
    color: white;
    font-size: 24px;
    cursor: pointer;
    box-shadow: 0 4px 15px rgba(233, 30, 99, 0.4);
    transition: transform 0.2s, opacity 0.2s;
}

@media (hover: hover) {
    .music-btn:hover {
        transform: scale(1.1);
    }
}

.music-btn.off {
    opacity: 0.5;
}

.shuffle-btn {
    width: 50px;
    height: 50px;
    border-radius: 50%;
    background: linear-gradient(135deg, var(--pink-dark), var(--red));
    border: none;
    color: white;
    font-size: 24px;
    cursor: pointer;
    box-shadow: 0 4px 15px rgba(233, 30, 99, 0.4);
    transition: transform 0.2s;
}

@media (hover: hover) {
    .shuffle-btn:hover {
        transform: scale(1.1);
    }
}

.shuffle-btn:active {
    transform: scale(0.95);
}

.back-btn {
    background: rgba(20, 20, 45, 0.6);
    border: 1px solid rgba(153, 69, 255, 0.3);
    color: #fff;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
    font-size: 24px;
    width: 45px;
    height: 45px;
    border-radius: 50%;
    cursor: pointer;
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    transition: transform 0.2s;
    flex-shrink: 0;
}

/* ===== Game Bottom Bar ===== */
.game-bottom-bar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-top: 15px;
    padding: 0 10px;
}

@media (hover: hover) {
    .back-btn:hover {
        transform: scale(1.1);
    }
}

/* ===== Responsive ===== */
@media (max-width: 600px) {
    :root {
        --tile-size: 40px;
        --gap: 4px;
    }

    .map-container {
        height: 300px;
    }

    .level-dot {
        width: 35px;
        height: 35px;
    }

    .card {
        padding: 20px 15px;
    }

    h1 {
        font-size: 1.5rem;
    }

    .stat {
        padding: 6px 10px;
        min-width: 60px;
    }

    .stat-value {
        font-size: 1rem;
    }

    .stat-label {
        font-size: 0.6rem;
    }


}

@media (max-width: 400px) {
    :root {
        --tile-size: 35px;
        --gap: 3px;
    }

    .header {
        gap: 6px;
    }

    .stat {
        padding: 5px 8px;
        min-width: 52px;
    }

    .level-header {
        font-size: 0.95rem;
    }
}


/* ===== Final Congratulations Screen ===== */
#congratsScreen {
    position: relative;
    overflow: hidden;
    border: 3px solid transparent;
    background-image: linear-gradient(var(--card-bg), var(--card-bg)),
        linear-gradient(45deg, #ff6b9d, #ffd700, #a855f7, #ff6b9d, #ffd700);
    background-origin: border-box;
    background-clip: padding-box, border-box;
    background-size: 100% 100%, 300% 300%;
    animation: congratsBorder 4s linear infinite;
}

@keyframes congratsBorder {
    0% {
        background-position: 0 0, 0% 50%;
    }

    50% {
        background-position: 0 0, 100% 50%;
    }

    100% {
        background-position: 0 0, 0% 50%;
    }
}

/* Sparkle overlay */
#congratsScreen::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background:
        radial-gradient(circle at 20% 20%, rgba(255, 215, 0, 0.15) 0%, transparent 50%),
        radial-gradient(circle at 80% 30%, rgba(255, 105, 180, 0.1) 0%, transparent 50%),
        radial-gradient(circle at 50% 80%, rgba(164, 85, 247, 0.1) 0%, transparent 50%);
    animation: sparkleShift 5s ease-in-out infinite;
    pointer-events: none;
    z-index: 0;
}

@keyframes sparkleShift {

    0%,
    100% {
        opacity: 0.6;
        transform: scale(1);
    }

    50% {
        opacity: 1;
        transform: scale(1.05);
    }
}

#congratsScreen>*:not(.firework-particle):not(.congrats-star) {
    position: relative;
    z-index: 1;
}

/* Bouncing trophy */
#congratsScreen .hearts {
    animation: trophyBounce 1.5s ease-in-out infinite;
    font-size: 2.5rem;
}

@keyframes trophyBounce {

    0%,
    100% {
        transform: translateY(0) scale(1);
    }

    25% {
        transform: translateY(-8px) scale(1.1);
    }

    50% {
        transform: translateY(0) scale(1);
    }

    75% {
        transform: translateY(-4px) scale(1.05);
    }
}

.congrats-title {
    font-size: 2.4rem;
    background: linear-gradient(135deg, #ff6b9d, #ffd700, #c44dff, #ff6b9d);
    background-size: 300% auto;
    -webkit-background-clip: text;
    background-clip: text;
    -webkit-text-fill-color: transparent;
    animation: shimmerText 2.5s linear infinite;
    margin-bottom: 2px;
    filter: drop-shadow(0 2px 4px rgba(255, 105, 180, 0.3));
}

@keyframes shimmerText {
    0% {
        background-position: 0% center;
    }

    100% {
        background-position: 300% center;
    }
}

.congrats-subtitle {
    font-size: 1.15rem;
    color: #e91e63;
    margin-bottom: 6px;
    font-weight: 600;
    opacity: 0;
    animation: congratsFadeUp 0.8s ease-out 0.3s forwards;
}

@keyframes congratsFadeUp {
    0% {
        opacity: 0;
        transform: translateY(15px);
    }

    100% {
        opacity: 1;
        transform: translateY(0);
    }
}

.congrats-photo {
    display: block;
    width: 220px;
    height: 220px;
    border-radius: 50%;
    object-fit: cover;
    border: 5px solid var(--gold);
    box-shadow:
        0 0 30px rgba(255, 215, 0, 0.7),
        0 0 60px rgba(255, 105, 180, 0.5),
        0 0 90px rgba(255, 215, 0, 0.3),
        inset 0 0 20px rgba(255, 215, 0, 0.1);
    margin: 8px auto;
    animation: congratsPhotoIn 1s cubic-bezier(0.34, 1.56, 0.64, 1) 0.5s both,
        congratsPhotoGlow 2s ease-in-out 1.5s infinite;
}

@keyframes congratsPhotoIn {
    0% {
        transform: scale(0) rotate(-30deg);
        opacity: 0;
    }

    60% {
        transform: scale(1.15) rotate(5deg);
        opacity: 1;
    }

    100% {
        transform: scale(1) rotate(0deg);
        opacity: 1;
    }
}

@keyframes congratsPhotoGlow {

    0%,
    100% {
        box-shadow:
            0 0 30px rgba(255, 215, 0, 0.7),
            0 0 60px rgba(255, 105, 180, 0.5),
            0 0 90px rgba(255, 215, 0, 0.3);
        transform: scale(1);
    }

    50% {
        box-shadow:
            0 0 40px rgba(255, 215, 0, 1),
            0 0 80px rgba(255, 105, 180, 0.7),
            0 0 120px rgba(255, 215, 0, 0.5);
        transform: scale(1.03);
    }
}

.congrats-message {
    font-size: 1.2rem;
    font-weight: 700;
    color: #e91e63;
    text-shadow: 0 1px 10px rgba(233, 30, 99, 0.4);
    margin: 6px auto 10px;
    text-align: center;
    opacity: 0;
    animation: congratsFadeUp 0.8s ease-out 1s forwards;
}

.congrats-stats {
    display: flex;
    justify-content: center;
    gap: 20px;
    margin: 8px auto 12px;
    opacity: 0;
    animation: congratsFadeUp 0.8s ease-out 1.3s forwards;
}

.congrats-stat {
    display: flex;
    flex-direction: column;
    align-items: center;
    background: linear-gradient(135deg, rgba(233, 30, 99, 0.08), rgba(255, 215, 0, 0.08));
    border: 2px solid rgba(233, 30, 99, 0.25);
    border-radius: 14px;
    padding: 8px 20px;
    backdrop-filter: blur(4px);
}

.congrats-stat-value {
    font-size: 1.7rem;
    font-weight: 800;
    color: #c2185b;
    text-shadow: 0 1px 4px rgba(194, 24, 91, 0.3);
}

.congrats-stat-label {
    font-size: 0.8rem;
    color: #555;
    font-weight: 600;
}

/* Firework particles */
.firework-particle {
    position: absolute;
    border-radius: 50%;
    pointer-events: none;
    z-index: 2;
}

/* Falling golden stars */
.congrats-star {
    position: absolute;
    pointer-events: none;
    z-index: 0;
    opacity: 0;
    animation: fallingStar linear forwards;
}

@keyframes fallingStar {
    0% {
        opacity: 0;
        transform: translateY(-20px) rotate(0deg) scale(0.5);
    }

    10% {
        opacity: 1;
    }

    90% {
        opacity: 0.8;
    }

    100% {
        opacity: 0;
        transform: translateY(calc(100vh)) rotate(720deg) scale(0.2);
    }
}

/* ===== Victory Screen Animation ===== */
.win-animate {
    animation: winEntrance 0.8s cubic-bezier(0.34, 1.56, 0.64, 1);
}

@keyframes winEntrance {
    0% {
        opacity: 0;
        transform: scale(0.3) translateY(50px);
    }

    50% {
        opacity: 1;
        transform: scale(1.05) translateY(-10px);
    }

    100% {
        transform: scale(1) translateY(0);
    }
}

.win-hearts {
    animation: heartBounce 1s ease-in-out infinite;
}

@keyframes heartBounce {

    0%,
    100% {
        transform: scale(1);
    }

    25% {
        transform: scale(1.2) rotate(-5deg);
    }

    50% {
        transform: scale(1) rotate(0deg);
    }

    75% {
        transform: scale(1.2) rotate(5deg);
    }
}

/* ===== Special Tile Activation Animations ===== */
.tile.special-rocket-h.activating::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 300%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(0, 229, 255, 0.6), rgba(255, 255, 255, 0.8), rgba(0, 229, 255, 0.6), transparent);
    animation: rocketFlashH 0.4s linear;
    z-index: 20;
    pointer-events: none;
}

.tile.special-rocket-v.activating::before {
    content: '';
    position: absolute;
    left: 0;
    top: -100%;
    width: 100%;
    height: 300%;
    background: linear-gradient(180deg, transparent, rgba(255, 64, 129, 0.6), rgba(255, 255, 255, 0.8), rgba(255, 64, 129, 0.6), transparent);
    animation: rocketFlashV 0.4s linear;
    z-index: 20;
    pointer-events: none;
}

@keyframes rocketFlashH {
    0% {
        transform: translateX(-30%);
        opacity: 0;
    }

    50% {
        opacity: 1;
    }

    100% {
        transform: translateX(30%);
        opacity: 0;
    }
}

@keyframes rocketFlashV {
    0% {
        transform: translateY(-30%);
        opacity: 0;
    }

    50% {
        opacity: 1;
    }

    100% {
        transform: translateY(30%);
        opacity: 0;
    }
}

.tile.special-bomb.activating {
    animation: bombExplode 0.5s ease-out !important;
}

@keyframes bombExplode {
    0% {
        transform: scale(1);
        box-shadow: 0 0 12px rgba(255, 140, 0, 0.8);
    }

    30% {
        transform: scale(1.4);
        box-shadow: 0 0 40px rgba(255, 140, 0, 1), 0 0 80px rgba(255, 60, 0, 0.6);
    }

    100% {
        transform: scale(0.5);
        opacity: 0;
        box-shadow: 0 0 60px rgba(255, 140, 0, 0), 0 0 100px rgba(255, 60, 0, 0);
    }
}

.tile.special-rainbow.activating {
    animation: rainbowBurst 0.5s ease-out !important;
}

@keyframes rainbowBurst {
    0% {
        transform: scale(1);
        box-shadow: 0 0 12px #ff0000;
    }

    25% {
        transform: scale(1.5) rotate(90deg);
        box-shadow: 0 0 40px #ffff00, 0 0 60px #00ff00;
    }

    50% {
        transform: scale(1.8) rotate(180deg);
        box-shadow: 0 0 50px #0088ff, 0 0 80px #8800ff;
    }

    100% {
        transform: scale(0);
        opacity: 0;
    }
}

/* ===== Gallery ===== */
.gallery-grid {
    max-height: 60vh;
    overflow-y: auto;
    padding: 10px;
}

.gallery-section {
    margin-bottom: 20px;
}

.gallery-section h3 {
    margin-bottom: 8px;
    font-size: 1.1rem;
    color: var(--pink-dark);
}

.gallery-photo {
    width: calc(33.33% - 6px);
    aspect-ratio: 1;
    object-fit: cover;
    border-radius: 10px;
    margin: 3px;
    cursor: pointer;
    transition: transform 0.3s, box-shadow 0.3s;
}

@media (hover: hover) {
    .gallery-photo:hover {
        transform: scale(1.05);
        box-shadow: 0 4px 20px rgba(255, 105, 180, 0.4);
    }
}

.gallery-photo-expanded {
    width: calc(100% - 6px) !important;
    aspect-ratio: auto;
    border-radius: 15px;
    box-shadow: 0 8px 30px rgba(0, 0, 0, 0.3);
}



/* ===== Settings Gear Button ===== */
.settings-gear {
    position: absolute;
    top: 15px;
    right: 15px;
    width: 40px;
    height: 40px;
    background: rgba(255, 255, 255, 0.25);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.4);
    border-radius: 50%;
    cursor: pointer;
    font-size: 1.2rem;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s ease;
    z-index: 10;
    padding: 0;
    line-height: 1;
}

@media (hover: hover) {
    .settings-gear:hover {
        background: rgba(255, 255, 255, 0.4);
        transform: rotate(90deg) scale(1.1);
    }
}

.settings-gear.active {
    background: rgba(255, 105, 180, 0.2);
    border-color: rgba(255, 105, 180, 0.5);
    transform: rotate(180deg);
}

.settings-panel {
    margin-top: 15px;
    background: rgba(255, 255, 255, 0.15);
    border-radius: 20px;
    padding: 20px;
    border: 1px solid rgba(255, 255, 255, 0.3);
}

@keyframes settingsSlideIn {
    from {
        opacity: 0;
        transform: translateY(-10px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.settings-item {
    padding: 8px 0;
    display: flex;
    align-items: center;
    justify-content: space-between;
    flex-wrap: wrap;
}

.settings-label {
    display: block;
    font-size: 0.85rem;
    font-weight: 600;
    color: var(--red-dark);
    margin-bottom: 10px;
}

.volume-control {
    display: flex;
    align-items: center;
    gap: 10px;
}

.volume-icon {
    font-size: 1.3rem;
    min-width: 28px;
    text-align: center;
}

.volume-slider {
    -webkit-appearance: none;
    appearance: none;
    flex: 1;
    height: 6px;
    border-radius: 3px;
    background: linear-gradient(90deg, var(--pink), var(--gold));
    outline: none;
    opacity: 0.9;
    transition: opacity 0.2s;
}

@media (hover: hover) {
    .volume-slider:hover {
        opacity: 1;
    }
}

.volume-slider::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    width: 22px;
    height: 22px;
    border-radius: 50%;
    background: linear-gradient(135deg, var(--pink-dark), var(--red));
    cursor: pointer;
    box-shadow: 0 2px 8px rgba(233, 30, 99, 0.4);
    border: 2px solid white;
    transition: transform 0.2s;
}

@media (hover: hover) {
    .volume-slider::-webkit-slider-thumb:hover {
        transform: scale(1.2);
    }
}

.volume-slider::-moz-range-thumb {
    width: 22px;
    height: 22px;
    border-radius: 50%;
    background: linear-gradient(135deg, var(--pink-dark), var(--red));
    cursor: pointer;
    box-shadow: 0 2px 8px rgba(233, 30, 99, 0.4);
    border: 2px solid white;
}

.volume-value {
    font-size: 0.85rem;
    font-weight: 700;
    color: var(--red-dark);
    min-width: 35px;
    text-align: right;
}

.settings-divider {
    height: 1px;
    background: linear-gradient(90deg, transparent, rgba(255, 105, 180, 0.3), transparent);
    margin: 12px 0;
}

.btn-reset {
    background: linear-gradient(135deg, #ff6b6b, #ee5a24);
    color: white;
    border: none;
    padding: 10px 22px;
    font-size: 0.9rem;
    font-family: 'Comfortaa', cursive;
    font-weight: 600;
    border-radius: 25px;
    cursor: pointer;
    box-shadow: 0 4px 15px rgba(238, 90, 36, 0.3);
    transition: all 0.3s ease;
    display: block;
    margin: 0 auto;
}

@media (hover: hover) {
    .btn-reset:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(238, 90, 36, 0.4);
    }
}

.btn-reset:active {
    transform: translateY(0);
}

.settings-hint {
    font-size: 0.7rem;
    color: rgba(194, 24, 91, 0.6);
    margin-top: 6px;
    text-align: center;
}

/* Toggle switch */
.toggle-switch {
    position: relative;
    display: inline-block;
    width: 50px;
    height: 26px;
    flex-shrink: 0;
}

.toggle-switch input {
    opacity: 0;
    width: 0;
    height: 0;
}

.toggle-slider {
    position: absolute;
    cursor: pointer;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.2);
    border-radius: 26px;
    transition: background 0.3s;
}

.toggle-slider::before {
    content: '';
    position: absolute;
    height: 20px;
    width: 20px;
    left: 3px;
    bottom: 3px;
    background: white;
    border-radius: 50%;
    transition: transform 0.3s;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
}

.toggle-switch input:checked+.toggle-slider {
    background: #4caf50;
}

.toggle-switch input:checked+.toggle-slider::before {
    transform: translateX(24px);
}

/* ===== Adaptive Tile Sizing ===== */
@media (max-width: 360px) {
    :root {
        --tile-size: 32px;
        --gap: 2px;
    }
}

@media (min-width: 361px) and (max-width: 400px) {
    :root {
        --tile-size: 38px;
        --gap: 3px;
    }
}

@media (min-width: 401px) and (max-width: 480px) {
    :root {
        --tile-size: 45px;
        --gap: 4px;
    }
}

@media (min-width: 481px) and (max-width: 600px) {
    :root {
        --tile-size: 55px;
        --gap: 5px;
    }
}

@media (min-width: 601px) {
    :root {
        --tile-size: 65px;
        --gap: 6px;
    }
}

/* Landscape orientation on mobile */
@media (orientation: landscape) and (max-height: 500px) {
    :root {
        --tile-size: 30px;
        --gap: 2px;
    }

    body {
        padding: 5px;
    }

    .header {
        gap: 4px;
        margin-bottom: 4px;
    }

    .stat {
        padding: 3px 6px;
        min-width: 45px;
    }

    .stat-value {
        font-size: 0.85rem;
    }

    .stat-label {
        font-size: 0.5rem;
    }

    .board-container {
        padding: 5px;
    }
}

/* ===== Candy Splash Screen ===== */
.candy-splash {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    min-height: 85vh;
    text-align: center;
    animation: fadeInUp 0.8s ease-out;
}

.splash-candies {
    font-size: 3rem;
    letter-spacing: 8px;
    margin-bottom: 1rem;
    animation: candyPulse 2s ease-in-out infinite;
}

@keyframes candyPulse {

    0%,
    100% {
        transform: scale(1);
    }

    50% {
        transform: scale(1.08);
    }
}

.splash-title {
    font-size: 3.5rem;
    font-weight: 700;
    color: #fff;
    text-shadow: 0 0 20px rgba(153, 69, 255, 0.5), 0 0 40px rgba(153, 69, 255, 0.2);
    margin-bottom: 0.5rem;
}

.splash-sub {
    font-size: 1.2rem;
    color: #14F195;
    margin-bottom: 0.5rem;
    font-weight: 600;
}

.splash-desc {
    font-size: 0.85rem;
    color: rgba(255, 255, 255, 0.5);
    max-width: 350px;
    line-height: 1.5;
    margin-bottom: 2rem;
}

.splash-btn {
    font-size: 1.3rem;
    padding: 18px 50px;
}

/* ===== Tile Emoji Override ===== */
.tile {
    font-size: calc(var(--tile-size) * 0.65);
    display: flex;
    align-items: center;
    justify-content: center;
    line-height: 1;
}

/* Hide ::before glossy overlay on special tiles so SVG icon shows cleanly */
.tile.special-rocket-h::before,
.tile.special-rocket-v::before,
.tile.special-bomb::before,
.tile.special-rainbow::before,
.tile.special-lightning::before {
    display: none;
}

/* ===== Wallet Button ===== */
.btn-wallet {
    background: linear-gradient(135deg, #9945FF, #14F195);
    color: white;
    font-size: 0.85rem;
    padding: 10px 25px;
    margin-top: 1rem;
    opacity: 0.9;
    transition: all 0.3s;
}

.btn-wallet:hover {
    opacity: 1;
    transform: translateY(-2px);
}

.btn-wallet.connected {
    background: linear-gradient(135deg, #14F195, #9945FF);
    font-size: 0.75rem;
}

.wallet-gear {
    position: absolute;
    top: 15px;
    left: 15px;
    width: 40px;
    height: 40px;
    background: rgba(20, 20, 45, 0.6);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    border: 1px solid rgba(153, 69, 255, 0.3);
    border-radius: 50%;
    cursor: pointer;
    font-size: 1.2rem;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s ease;
    z-index: 10;
    padding: 0;
    line-height: 1;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
}

.wallet-gear:hover {
    background: rgba(40, 40, 80, 0.8);
    transform: scale(1.1);
}

/* Pulsing animation while wallet is reconnecting */
.wallet-gear.wallet-reconnecting {
    animation: walletReconnectPulse 1.5s ease-in-out infinite;
    pointer-events: none;
}

@keyframes walletReconnectPulse {

    0%,
    100% {
        opacity: 0.6;
        transform: scale(1);
    }

    50% {
        opacity: 1;
        transform: scale(1.1);
    }
}

/* ===== Leaderboard ===== */
.leaderboard-badge {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    background: rgba(20, 241, 149, 0.15);
    border: 1px solid rgba(20, 241, 149, 0.4);
    border-radius: 20px;
    padding: 4px 14px;
    font-size: 0.7rem;
    font-weight: 600;
    color: #0d9668;
    margin-bottom: 15px;
}

.badge-dot {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    background: #14F195;
    animation: dotPulse 2s ease-in-out infinite;
}

@keyframes dotPulse {

    0%,
    100% {
        opacity: 1;
    }

    50% {
        opacity: 0.4;
    }
}

.leaderboard-table {
    width: 100%;
    border-radius: 15px;
    overflow: hidden;
    background: rgba(20, 20, 45, 0.6);
    border: 1px solid rgba(153, 69, 255, 0.3);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    margin-bottom: 10px;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
}

.lb-header {
    display: flex;
    padding: 10px 15px;
    font-size: 0.7rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 1px;
    color: #e0e0ff;
    border-bottom: 1px solid rgba(153, 69, 255, 0.3);
}

.lb-row {
    display: flex;
    padding: 12px 15px;
    align-items: center;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    transition: background 0.2s;
}

.lb-row:last-child {
    border-bottom: none;
}

.lb-row:hover {
    background: rgba(255, 255, 255, 0.1);
}

.lb-rank {
    width: 40px;
    font-weight: 700;
    text-align: center;
}

.lb-player {
    flex: 1;
    font-size: 0.85rem;
    font-weight: 600;
    font-family: 'Courier New', monospace;
}

.lb-score {
    width: 70px;
    text-align: right;
    font-weight: 700;
    font-size: 0.9rem;
}

.lb-stars {
    width: 70px;
    text-align: right;
    font-size: 0.75rem;
}

.lb-gold {
    background: rgba(255, 215, 0, 0.12);
}

.lb-silver {
    background: rgba(192, 192, 192, 0.1);
}

.lb-bronze {
    background: rgba(205, 127, 50, 0.08);
}

.lb-footer {
    font-size: 0.75rem;
    color: rgba(194, 24, 91, 0.5);
    font-style: italic;
    margin-top: 5px;
}

/* ===== TX Notification Toast ===== */
@keyframes slideInRight {
    from {
        transform: translateX(120%);
        opacity: 0;
    }

    to {
        transform: translateX(0);
        opacity: 1;
    }
}